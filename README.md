# real_estate_datas

# 概要
不動産取引価格情報取得API（国交省）のデータを取得して、いじる
- https://www.land.mlit.go.jp/webland/api.html

# データ仕様(データ例は、北海道の20221-20224で確認、Typeが農地、林地は除外)
## 各列の概要
### Type
- 取引の種類['宅地(土地と建物)', '中古マンション等', '宅地(土地)', '農地', '林地']
- "宅地(土地)"はほぼTotalFloorAreaがNanなので、建物が立っていない土地
### Region
- ['住宅地', nan, '商業地', '工業地', '宅地見込地']
### MunicipalityCode
- 市区町村コード(5桁の数字)
### Prefecture
- 都道府県(文字列) 
  - ex:北海道
### Municipality
- 市区町村名(文字列) 
  - ex:札幌市中央区
### DistrictName
- 地区名 
  - ex:旭ヶ丘 大通り西
### TradePrice
- 価格
- astype('int')可能
### PricePerUnit
- 坪単価
- astype('float')可能　Nanあり
### Area
- 面積
- 「㎡以上」の文字列を除去すればint可能(['2000㎡以上', '5000㎡以上']の二つがあるっぽい)
### LandShape
- ['台形', nan, '長方形', 'ほぼ整形', '不整形', 'ほぼ長方形', 'ほぼ正方形', '正方形', 'ほぼ台形','袋地等']
### Frontage
- 間口
  - 道路や通りに面する長さ。
- 2m未満は再建築不可のため、よろしくない。
- m2抜きで、floatOK
### UnitPrice
- 取引価格(平方メートル単価)
- float
### TotalFloorArea
- 延床面積。建物面積ともいう。
- 「㎡以上」文字列除去でfloat可能
### BuildingYear
- 築年。(なんで和暦なんだよ)
- ['平成2年', '平成19年',戦前、nan...]
### Structure
- ['木造', 'ＲＣ', 'ＳＲＣ', nan, '鉄骨造', '軽量鉄骨造', 'ＲＣ、木造', 'ブロック造', 'ＲＣ、鉄骨造','鉄骨造、木造', '木造、ブロック造', 'ＲＣ、ブロック造']
### Use 
- 用途。
- ['住宅', nan, '共同住宅',..]。住宅と共同住宅が大半
### Purpose
- 今後の利用目的。
- 古いデータにはないので注意。
- ['住宅', 'その他', '店舗', '事務所', nan, '工場', '倉庫']
### Direction
- 前面道路の方位
### Classification
- 前面道路の種類
- 私道、国道、県道 etc.
### Breadth
- 前面道路の道幅。
- floatOK
### CityPlanning
- 都市計画
- ['第１種住居地域', '商業地域'..]
- 参考：https://iqrafudosan.com/channel/urban-planning-japan
### CoverageRatio 
- 建蔽率
- だいたい60%が多い。用途地域によって制限があるぽい。
- nanあるが、n*10の整数
### FloorAreaRatio
- 容積率。
- 用途地域によって制限があるらしい
### Period
- 取引時期 
- APIパラメータで指定するやつ。['2022年第１四半期', '2022年第４四半期'...]
### FloorPlan
- [nan, '２ＬＤＫ', '３ＬＤＫ', '１Ｒ＋Ｓ'...]
### Renovation
- 改装有無。[nan, '改装済', '未改装']
### Remarks
- 取引の事情等。
- [nan, '調停・競売等', '私道を含む取引', '隣地の購入', '関係者間取引', '古屋付き・取壊し前提']。
- 大半がNan

## 不要な列
分析したい意図と合わないのでデータ量削減のため、という意図
- PricePerUnit
- UnitPrice
- Purpose
- Direction
- Classification
- Remarks(nanだけに絞ったあとで)

## 各列の下処理
正規化をするかどうか。
- Type: 特になし
- Region: 特になし
- MunicipalityCode: 特になし
- Prefecture: コード化して正規化するかどうか
- DistrictName: 特になし
- TradePrice: int、万円にする
- PricePerUnit: float
- Area: m2消す、float
- LandShape; 特になし
- Frontage: m2消す、float
- UnitPrice: float
- TotalFloorArea: m2消す、float
- BuildingYear: 西暦に直す+築年列を作る
- Structure: 特になし
- Use: 特になし
- Purpose: 特になし
- Direction: 特になし
- Classification: 特になし
- Breadth: 特になし
- CityPlanning: 特になし。ちょっと正規化したい
- CoverageRatio: float
- FloorAreaRatio: float
- Period: XXXX年第Y四半期を年とYに分ける
- FloorPlan: 特になし
- Renovation: 特になし
- Remarks: 特になし。

# データの概観

## カテゴリデータ

### カウント 
- 各カテゴリごとのデータ数と、全体に占める割合を出力
- 神奈川県の、2021-2022年のデータで確認。
- カテゴリ数が多いデータは、適宜列を除去している(max15)。
- 以下の条件で絞っている
  - 'Type':['宅地(土地と建物)', '中古マンション等', '宅地(土地)'],
  - 'Remarks': 'Nan'

|            |   宅地(土地と建物) |   中古マンション等 |   宅地(土地) |
|:-----------|-------------------:|-------------------:|-------------:|
| Type_count |            17100   |              15204 |       8752   |
| Type(%)    |               41.7 |                 37 |         21.3 |

|              |   住宅地 |   Nan |   商業地 |   宅地見込地 |   工業地 |
|:-------------|---------:|------:|---------:|-------------:|---------:|
| Region_count |  24085   | 15204 |   1276   |        262   |    229   |
| Region(%)    |     58.7 |    37 |      3.1 |          0.6 |      0.6 |

|                    |   藤沢市 |   横浜市港北区 |   横須賀市 |   横浜市鶴見区 |   相模原市南区 |   横浜市南区 |   横浜市戸塚区 |   横浜市神奈川区 |   横浜市青葉区 |   茅ヶ崎市 |   相模原市中央区 |   横浜市中区 |   横浜市旭区 |   川崎市川崎区 |   大和市 |
|:-------------------|---------:|---------------:|-----------:|---------------:|---------------:|-------------:|---------------:|-----------------:|---------------:|-----------:|-----------------:|-------------:|-------------:|---------------:|---------:|
| Municipality_count |   1924   |         1675   |     1616   |         1366   |         1298   |       1263   |         1257   |             1245 |           1217 |     1200   |           1193   |       1182   |       1145   |         1130   |   1076   |
| Municipality(%)    |      4.7 |            4.1 |        3.9 |            3.3 |            3.2 |          3.1 |            3.1 |                3 |              3 |        2.9 |              2.9 |          2.9 |          2.8 |            2.8 |      2.6 |

|                    |   中央 |   上鶴間本町 |   鶴見中央 |   新横浜 |   戸塚町 |    森 |   本町 |   福田 |   上溝 |   港南台 |   美しが丘 |   相模原 |   相模が丘 |   日吉本町 |   下鶴間 |
|:-------------------|-------:|-------------:|-----------:|---------:|---------:|------:|-------:|-------:|-------:|---------:|-----------:|---------:|-----------:|-----------:|---------:|
| DistrictName_count |  202   |        175   |      170   |    166   |    155   | 152   |  150   |  146   |  145   |    142   |      132   |    130   |      128   |      126   |    126   |
| DistrictName(%)    |    0.5 |          0.4 |        0.4 |      0.4 |      0.4 |   0.4 |    0.4 |    0.4 |    0.4 |      0.3 |        0.3 |      0.3 |        0.3 |        0.3 |      0.3 |


|                 |   Nan |   ほぼ長方形 |   長方形 |   不整形 |   ほぼ台形 |   袋地等 |   ほぼ整形 |   ほぼ正方形 |   台形 |   正方形 |
|:----------------|------:|-------------:|---------:|---------:|-----------:|---------:|-----------:|-------------:|-------:|---------:|
| LandShape_count | 15205 |       8352   |   5413   |   3545   |     2977   |   1903   |       1252 |         1251 |  966   |    192   |
| LandShape(%)    |    37 |         20.3 |     13.2 |      8.6 |        7.3 |      4.6 |          3 |            3 |    2.4 |      0.5 |

|                 |    木造 |   Nan |    ＲＣ |   ＳＲＣ |   軽量鉄骨造 |   鉄骨造 |   ＲＣ、木造 |   ブロック造 |   ＲＣ、鉄骨造 |   鉄骨造、木造 |   ＳＲＣ、ＲＣ |   木造、ブロック造 |   鉄骨造、木造、ブロック造 |   ＲＣ、木造、ブロック造 |   ＳＲＣ、ＲＣ、鉄骨造 |
|:----------------|--------:|------:|--------:|---------:|-------------:|---------:|-------------:|-------------:|---------------:|---------------:|---------------:|-------------------:|---------------------------:|-------------------------:|-----------------------:|
| Structure_count | 14090   | 11484 | 11223   |   2580   |        842   |    735   |         39   |         23   |             15 |             11 |              8 |                  3 |                          1 |                        1 |                      1 |
| Structure(%)    |    34.3 |    28 |    27.3 |      6.3 |          2.1 |      1.8 |          0.1 |          0.1 |              0 |              0 |              0 |                  0 |                          0 |                        0 |                      0 |

|           |    住宅 |     Nan |   共同住宅 |   住宅、店舗 |   事務所 |   共同住宅、店舗 |   店舗 |   住宅、駐車場 |   その他 |   事務所、店舗 |   共同住宅、事務所 |   工場 |   住宅、事務所 |   倉庫 |   事務所、倉庫 |
|:----------|--------:|--------:|-----------:|-------------:|---------:|-----------------:|-------:|---------------:|---------:|---------------:|-------------------:|-------:|---------------:|-------:|---------------:|
| Use_count | 24184   | 14116   |     1527   |        173   |    155   |            118   |  111   |           97   |     63   |           46   |               39   |   36   |           35   |   35   |           30   |
| Use(%)    |    58.9 |    34.4 |        3.7 |          0.4 |      0.4 |              0.3 |    0.3 |            0.2 |      0.2 |            0.1 |                0.1 |    0.1 |            0.1 |    0.1 |            0.1 |

|               |    住宅 |    Nan |   その他 |   事務所 |   店舗 |   倉庫 |   工場 |
|:--------------|--------:|-------:|---------:|---------:|-------:|-------:|-------:|
| Purpose_count | 34406   | 3386   |   2322   |    388   |  323   |  146   |   85   |
| Purpose(%)    |    83.8 |    8.2 |      5.7 |      0.9 |    0.8 |    0.4 |    0.2 |

|                    |   第１種低層住居専用地域 |   第１種住居地域 |   第１種中高層住居専用地域 |   商業地域 |   近隣商業地域 |   準工業地域 |   第２種中高層住居専用地域 |   第２種住居地域 |   準住居地域 |   市街化調整区域 |   工業地域 |   Nan |   市街化区域及び市街化調整区域外の都市計画区域 |   第２種低層住居専用地域 |   工業専用地域 |
|:-------------------|-------------------------:|-----------------:|---------------------------:|-----------:|---------------:|-------------:|---------------------------:|-----------------:|-------------:|-----------------:|-----------:|------:|-----------------------------------------------:|-------------------------:|---------------:|
| CityPlanning_count |                  11166   |           7143   |                     6757   |     4485   |         2406   |       2094   |                     1605   |           1377   |       1175   |           1127   |      899   | 375   |                                          178   |                    169   |           70   |
| CityPlanning(%)    |                     27.2 |             17.4 |                       16.5 |       10.9 |            5.9 |          5.1 |                        3.9 |              3.4 |          2.9 |              2.7 |        2.2 |   0.9 |                                            0.4 |                      0.4 |            0.2 |

|              |   2021年第１四半期 |   2021年第２四半期 |   2021年第３四半期 |   2021年第４四半期 |   2022年第２四半期 |   2022年第１四半期 |   2022年第３四半期 |   2022年第４四半期 |
|:-------------|-------------------:|-------------------:|-------------------:|-------------------:|-------------------:|-------------------:|-------------------:|-------------------:|
| Period_count |             5722   |             5612   |             5419   |             5266   |             4895   |             4829   |             4702   |             4611   |
| Period(%)    |               13.9 |               13.7 |               13.2 |               12.8 |               11.9 |               11.8 |               11.5 |               11.2 |

|                 |     Nan |   ３ＬＤＫ |   ２ＬＤＫ |   １Ｋ |   ４ＬＤＫ |   １ＬＤＫ |   ２ＤＫ |   １ＤＫ |   ３ＤＫ |   １Ｒ |   ２ＬＤＫ＋Ｓ |   オープンフロア |   １ＬＤＫ＋Ｓ |   ２Ｋ |   ３ＬＤＫ＋Ｓ |
|:----------------|--------:|-----------:|-----------:|-------:|-----------:|-----------:|---------:|---------:|---------:|-------:|---------------:|-----------------:|---------------:|-------:|---------------:|
| FloorPlan_count | 26377   |     6658   |     2607   | 2535   |      867   |      599   |      421 |    318   |    211   |  154   |          106   |             83   |           34   |     16 |             14 |
| FloorPlan(%)    |    64.2 |       16.2 |        6.3 |    6.2 |        2.1 |        1.5 |        1 |      0.8 |      0.5 |    0.4 |            0.3 |              0.2 |            0.1 |      0 |              0 |

|                  |     Nan |   未改装 |   改装済 |
|:-----------------|--------:|---------:|---------:|
| Renovation_count | 27760   |   9087   |   4209   |
| Renovation(%)    |    67.6 |     22.1 |     10.3 |

### 今回の分析用の加工メモ
- Type:
  - 土地はいらないので、宅地(土地と建物)・中古マンション等の二つに絞る
- Structure
  - 美しくないから、データ数少ないのは"その他"にしたい。
  - 木造, Nan, ＲＣ, ＳＲＣ, 軽量鉄骨造, 鉄骨造,ブロック造以外はその他かな
- Use
  - 住宅用途に絞る。
  - 住宅,Nan,共同住宅,住宅の3つ以外は消そう(90%以上確保できる)
- Purpose
  - Useと同様
  - 住宅とNanにしぼる。Nan消しても良いが。。
- CityPlanning
  - よくわからないので、一旦そのまま。
  - 他の絞れば、絞られそう。
- Region
- Municipality
- LandShape
- Period
- FloorPlan
- Renovation
  - 絞らない